/* 社員 */
CREATE TABLE STAFF (
	ID						INT	NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME					VARCHAR(128),
	KANA					VARCHAR(128),
	SEX						CHAR(1),
	BIRTHDAY				CHAR(8),
	ZIP_CODE				CHAR(7),
	ADDRESS					VARCHAR(256),
	TEL						VARCHAR(32),
	STATION					VARCHAR(256),
	LAST_ACADEMIC_RECORD	VARCHAR(256)
);

/* 経歴データ */
CREATE TABLE CAREER (
	ID				INT	NOT NULL PRIMARY KEY AUTO_INCREMENT,
	STAFF_ID		INT NOT NULL,
	NAME			VARCHAR(128),
	CUSTOMER		VARCHAR(128),
	SUMMARY			VARCHAR(4096),
	PROJECT_MEMBERS	INT,
	TEAM_MEMBERS	INT,
	START_YM		CHAR(6),
	END_YM			CHAR(6)
);

/* OSデータ */
CREATE TABLE CAREER_OS (
	CAREER_ID	INT NOT NULL,
	MST_OS_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_OS_ID)
);

/* 言語データ */
CREATE TABLE CAREER_LANG (
	CAREER_ID	INT NOT NULL,
	MST_LANG_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_LANG_ID)
);

/* データベースデータ */
CREATE TABLE CAREER_DB (
	CAREER_ID	INT NOT NULL,
	MST_DB_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_DB_ID)
);

/* ミドルウェアデータ */
CREATE TABLE CAREER_MIDDLE (
	CAREER_ID		INT NOT NULL,
	MST_MIDDLE_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_MIDDLE_ID)
);

/* 役割データ */
CREATE TABLE CAREER_ROLE (
	CAREER_ID	INT NOT NULL,
	MST_ROLE_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_ROLE_ID)
);

/* 担当データ */
CREATE TABLE CAREER_ASSIGN (
	CAREER_ID		INT NOT NULL,
	MST_ASSIGN_ID	INT NOT NULL,
	PRIMARY KEY(CAREER_ID, MST_ASSIGN_ID)
);


/* OSマスター */
CREATE TABLE MST_OS (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);

/* 言語マスター */
CREATE TABLE MST_LANG (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);

/* データベースマスター */
CREATE TABLE MST_DB (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);

/* ミドルウェアマスター */
CREATE TABLE MST_MIDDLE (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);

/* 役割マスター */
CREATE TABLE MST_ROLE (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);

/* 担当マスター */
CREATE TABLE MST_ASSIGN (
	ID			INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	NAME		VARCHAR(128),
	DISP_ORDER	INT
);



/* 外部キー */
ALTER TABLE CAREER
  ADD CONSTRAINT CAREER_FK_1 FOREIGN KEY (STAFF_ID) REFERENCES STAFF (ID);

ALTER TABLE CAREER_OS
  ADD CONSTRAINT CAREER_OS_FK_2 FOREIGN KEY (MST_OS_ID) REFERENCES MST_OS (ID),
  ADD CONSTRAINT CAREER_OS_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);

ALTER TABLE CAREER_DB
  ADD CONSTRAINT CAREER_DB_FK_2 FOREIGN KEY (MST_DB_ID) REFERENCES MST_DB (ID),
  ADD CONSTRAINT CAREER_DB_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);

ALTER TABLE CAREER_LANG
  ADD CONSTRAINT CAREER_LANG_FK_2 FOREIGN KEY (MST_LANG_ID) REFERENCES MST_LANG (ID),
  ADD CONSTRAINT CAREER_LANG_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);

ALTER TABLE CAREER_MIDDLE
  ADD CONSTRAINT CAREER_MIDDLE_FK_2 FOREIGN KEY (MST_MIDDLE_ID) REFERENCES MST_MIDDLE (ID),
  ADD CONSTRAINT CAREER_MIDDLE_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);

ALTER TABLE CAREER_ROLE
  ADD CONSTRAINT CAREER_ROLE_FK_2 FOREIGN KEY (MST_ROLE_ID) REFERENCES MST_ROLE (ID),
  ADD CONSTRAINT CAREER_ROLE_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);

ALTER TABLE CAREER_ASSIGN
  ADD CONSTRAINT CAREER_ASSIGN_FK_2 FOREIGN KEY (MST_ASSIGN_ID) REFERENCES MST_ASSIGN (ID),
  ADD CONSTRAINT CAREER_ASSIGN_FK_1 FOREIGN KEY (CAREER_ID) REFERENCES CAREER (ID);
/*
Entity作ったら削除して法がいいかも（データ以降とかめんどくさいし）
*/

